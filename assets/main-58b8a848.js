class B{constructor(e){this.properties=e??[]}get(e){const r=this.properties.filter(i=>i.name===e).map(i=>i.value);if(r.length>1)throw new Error('Expected only one property to be named "'+e+'"');if(r.length!==0)return r[0]}getString(e){return this.getByType(e,"string")}getNumber(e){return this.getByType(e,"number")}getBoolean(e){return this.getByType(e,"boolean")}getByType(e,r){const i=this.get(e);if(i!==void 0){if(r!=="json"&&typeof i!==r)throw new Error('Expected property "'+e+'" to have type "'+r+'"');return i}}mustGetString(e){return this.mustGetByType(e,"string")}mustGetNumber(e){return this.mustGetByType(e,"number")}mustGetBoolean(e){return this.mustGetByType(e,"boolean")}mustGetByType(e,r){const i=this.get(e);if(i===void 0)throw new Error('Property "'+e+'" is missing');if(r!=="json"&&typeof i!==r)throw new Error('Expected property "'+e+'" to have type "'+r+'"');return i}getType(e){const r=this.properties.filter(i=>i.name===e).map(i=>i.type);if(r.length>1)throw new Error('Expected only one property to be named "'+e+'"');if(r.length!==0)return r[0]}}const F="https://unpkg.com/@workadventure/scripting-api-extra@1.9.1/dist";class oe{constructor(e){this.name=e.name,this.x=e.x,this.y=e.y,this.properties=new B(e.properties)}get isReadable(){const e=this.properties.getString("readableBy");return e?WA.player.tags.includes(e):!0}get isWritable(){const e=this.properties.getString("writableBy");return e?WA.player.tags.includes(e):!0}}function U(t){const e=t?"#"+t.join():"";WA.nav.openCoWebSite(F+"/configuration.html"+e,!0)}async function le(t,e){const r=await WA.room.getTiledMap(),i=new Map;return Z(r.layers,i,t,e),i}function Z(t,e,r,i){for(const n of t)if(n.type==="objectgroup"){for(const s of n.objects)if(s.type==="variable"||s.class==="variable"){if(r&&n.name!==r||i&&!i.includes(s.name))continue;e.set(s.name,new oe(s))}}else n.type==="group"&&Z(n.layers,e,r,i)}let V;async function R(){return V===void 0&&(V=fe()),V}async function fe(){return ue(await WA.room.getTiledMap())}function ue(t){const e=new Map;return ee(t.layers,"",e),e}function ee(t,e,r){for(const i of t)i.type==="group"?ee(i.layers,e+i.name+"/",r):(i.name=e+i.name,r.set(i.name,i))}async function te(){const t=await R(),e=[];for(const r of t.values())if(r.type==="objectgroup")for(const i of r.objects)(i.type==="area"||i.class==="area")&&e.push(i);return e}function ce(t){let e=1/0,r=1/0,i=0,n=0;const s=t.data;if(typeof s=="string")throw new Error("Unsupported tile layer data stored as string instead of CSV");for(let a=0;a<t.height;a++)for(let o=0;o<t.width;o++)s[o+a*t.width]!==0&&(e=Math.min(e,o),n=Math.max(n,o),r=Math.min(r,a),i=Math.max(i,a));return{top:r,left:e,right:n+1,bottom:i+1}}function re(t){let e=1/0,r=1/0,i=0,n=0;for(const s of t){const a=ce(s);a.left<e&&(e=a.left),a.top<r&&(r=a.top),a.right>n&&(n=a.right),a.bottom>i&&(i=a.bottom)}return{top:r,left:e,right:n,bottom:i}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var pe=Object.prototype.toString,k=Array.isArray||function(e){return pe.call(e)==="[object Array]"};function O(t){return typeof t=="function"}function ge(t){return k(t)?"array":typeof t}function I(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function H(t,e){return t!=null&&typeof t=="object"&&e in t}function he(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var be=RegExp.prototype.test;function de(t,e){return be.call(t,e)}var ye=/\S/;function ve(t){return!de(ye,t)}var me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function we(t){return String(t).replace(/[&<>"'`=\/]/g,function(r){return me[r]})}var Ae=/\s*/,We=/\s+/,q=/\s*=/,Se=/\s*\}/,Pe=/#|\^|\/|>|\{|&|=|!/;function Le(t,e){if(!t)return[];var r=!1,i=[],n=[],s=[],a=!1,o=!1,l="",f=0;function p(){if(a&&!o)for(;s.length;)delete n[s.pop()];else s=[];a=!1,o=!1}var g,h,L;function v(w){if(typeof w=="string"&&(w=w.split(We,2)),!k(w)||w.length!==2)throw new Error("Invalid tags: "+w);g=new RegExp(I(w[0])+"\\s*"),h=new RegExp("\\s*"+I(w[1])),L=new RegExp("\\s*"+I("}"+w[1]))}v(e||S.tags);for(var c=new x(t),d,u,b,m,A,y;!c.eos();){if(d=c.pos,b=c.scanUntil(g),b)for(var E=0,C=b.length;E<C;++E)m=b.charAt(E),ve(m)?(s.push(n.length),l+=m):(o=!0,r=!0,l+=" "),n.push(["text",m,d,d+1]),d+=1,m===`
`&&(p(),l="",f=0,r=!1);if(!c.scan(g))break;if(a=!0,u=c.scan(Pe)||"name",c.scan(Ae),u==="="?(b=c.scanUntil(q),c.scan(q),c.scanUntil(h)):u==="{"?(b=c.scanUntil(L),c.scan(Se),c.scanUntil(h),u="&"):b=c.scanUntil(h),!c.scan(h))throw new Error("Unclosed tag at "+c.pos);if(u==">"?A=[u,b,d,c.pos,l,f,r]:A=[u,b,d,c.pos],f++,n.push(A),u==="#"||u==="^")i.push(A);else if(u==="/"){if(y=i.pop(),!y)throw new Error('Unopened section "'+b+'" at '+d);if(y[1]!==b)throw new Error('Unclosed section "'+y[1]+'" at '+d)}else u==="name"||u==="{"||u==="&"?o=!0:u==="="&&v(b)}if(p(),y=i.pop(),y)throw new Error('Unclosed section "'+y[1]+'" at '+c.pos);return Ce(Ee(n))}function Ee(t){for(var e=[],r,i,n=0,s=t.length;n<s;++n)r=t[n],r&&(r[0]==="text"&&i&&i[0]==="text"?(i[1]+=r[1],i[3]=r[3]):(e.push(r),i=r));return e}function Ce(t){for(var e=[],r=e,i=[],n,s,a=0,o=t.length;a<o;++a)switch(n=t[a],n[0]){case"#":case"^":r.push(n),i.push(n),r=n[4]=[];break;case"/":s=i.pop(),s[5]=n[2],r=i.length>0?i[i.length-1][4]:e;break;default:r.push(n)}return e}function x(t){this.string=t,this.tail=t,this.pos=0}x.prototype.eos=function(){return this.tail===""};x.prototype.scan=function(e){var r=this.tail.match(e);if(!r||r.index!==0)return"";var i=r[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i};x.prototype.scanUntil=function(e){var r=this.tail.search(e),i;switch(r){case-1:i=this.tail,this.tail="";break;case 0:i="";break;default:i=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=i.length,i};function M(t,e){this.view=t,this.cache={".":this.view},this.parent=e}M.prototype.push=function(e){return new M(e,this)};M.prototype.lookup=function(e){var r=this.cache,i;if(r.hasOwnProperty(e))i=r[e];else{for(var n=this,s,a,o,l=!1;n;){if(e.indexOf(".")>0)for(s=n.view,a=e.split("."),o=0;s!=null&&o<a.length;)o===a.length-1&&(l=H(s,a[o])||he(s,a[o])),s=s[a[o++]];else s=n.view[e],l=H(n.view,e);if(l){i=s;break}n=n.parent}r[e]=i}return O(i)&&(i=i.call(this.view)),i};function W(){this.templateCache={_cache:{},set:function(e,r){this._cache[e]=r},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}W.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};W.prototype.parse=function(e,r){var i=this.templateCache,n=e+":"+(r||S.tags).join(":"),s=typeof i<"u",a=s?i.get(n):void 0;return a==null&&(a=Le(e,r),s&&i.set(n,a)),a};W.prototype.render=function(e,r,i,n){var s=this.getConfigTags(n),a=this.parse(e,s),o=r instanceof M?r:new M(r,void 0);return this.renderTokens(a,o,i,e,n)};W.prototype.renderTokens=function(e,r,i,n,s){for(var a="",o,l,f,p=0,g=e.length;p<g;++p)f=void 0,o=e[p],l=o[0],l==="#"?f=this.renderSection(o,r,i,n,s):l==="^"?f=this.renderInverted(o,r,i,n,s):l===">"?f=this.renderPartial(o,r,i,s):l==="&"?f=this.unescapedValue(o,r):l==="name"?f=this.escapedValue(o,r,s):l==="text"&&(f=this.rawValue(o)),f!==void 0&&(a+=f);return a};W.prototype.renderSection=function(e,r,i,n,s){var a=this,o="",l=r.lookup(e[1]);function f(h){return a.render(h,r,i,s)}if(l){if(k(l))for(var p=0,g=l.length;p<g;++p)o+=this.renderTokens(e[4],r.push(l[p]),i,n,s);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")o+=this.renderTokens(e[4],r.push(l),i,n,s);else if(O(l)){if(typeof n!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(r.view,n.slice(e[3],e[5]),f),l!=null&&(o+=l)}else o+=this.renderTokens(e[4],r,i,n,s);return o}};W.prototype.renderInverted=function(e,r,i,n,s){var a=r.lookup(e[1]);if(!a||k(a)&&a.length===0)return this.renderTokens(e[4],r,i,n,s)};W.prototype.indentPartial=function(e,r,i){for(var n=r.replace(/[^ \t]/g,""),s=e.split(`
`),a=0;a<s.length;a++)s[a].length&&(a>0||!i)&&(s[a]=n+s[a]);return s.join(`
`)};W.prototype.renderPartial=function(e,r,i,n){if(i){var s=this.getConfigTags(n),a=O(i)?i(e[1]):i[e[1]];if(a!=null){var o=e[6],l=e[5],f=e[4],p=a;l==0&&f&&(p=this.indentPartial(a,f,o));var g=this.parse(p,s);return this.renderTokens(g,r,i,p,n)}}};W.prototype.unescapedValue=function(e,r){var i=r.lookup(e[1]);if(i!=null)return i};W.prototype.escapedValue=function(e,r,i){var n=this.getConfigEscape(i)||S.escape,s=r.lookup(e[1]);if(s!=null)return typeof s=="number"&&n===S.escape?String(s):n(s)};W.prototype.rawValue=function(e){return e[1]};W.prototype.getConfigTags=function(e){return k(e)?e:e&&typeof e=="object"?e.tags:void 0};W.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!k(e))return e.escape};var S={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){N.templateCache=t},get templateCache(){return N.templateCache}},N=new W;S.clearCache=function(){return N.clearCache()};S.parse=function(e,r){return N.parse(e,r)};S.render=function(e,r,i,n){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+ge(e)+'" was given as the first argument for mustache#render(template, view, partials)');return N.render(e,r,i,n)};S.escape=we;S.Scanner=x;S.Context=M;S.Writer=W;class ie{constructor(e,r){this.template=e,this.state=r,this.ast=S.parse(e)}getValue(){return this.value===void 0&&(this.value=S.render(this.template,this.state)),this.value}onChange(e){const r=[];for(const i of this.getUsedVariables().values())r.push(this.state.onVariableChange(i).subscribe(()=>{const n=S.render(this.template,this.state);n!==this.value&&(this.value=n,e(this.value))}));return{unsubscribe:()=>{for(const i of r)i.unsubscribe()}}}isPureString(){return this.ast.length===0||this.ast.length===1&&this.ast[0][0]==="text"}getUsedVariables(){const e=new Set;return this.recursiveGetUsedVariables(this.ast,e),e}recursiveGetUsedVariables(e,r){for(const i of e){const n=i[0],s=i[1],a=i[4];["name","&","#","^"].includes(n)&&r.add(s),a!==void 0&&typeof a!="string"&&this.recursiveGetUsedVariables(a,r)}}}async function Te(){var t;const e=await te();for(const r of e){const i=(t=r.properties)!==null&&t!==void 0?t:[];for(const n of i){if(n.type==="int"||n.type==="bool"||n.type==="object"||typeof n.value!="string")continue;const s=new ie(n.value,WA.state);if(s.isPureString())continue;const a=s.getValue();await K(r.name,n.name,a),s.onChange(async o=>{await K(r.name,n.name,o)})}}}async function Be(){var t;const e=await R();for(const[r,i]of e.entries())if(i.type!=="objectgroup"){const n=(t=i.properties)!==null&&t!==void 0?t:[];for(const s of n){if(s.type==="int"||s.type==="bool"||s.type==="object"||typeof s.value!="string")continue;const a=new ie(s.value,WA.state);if(a.isPureString())continue;const o=a.getValue();$(r,s.name,o),a.onChange(l=>{$(r,s.name,l)})}}}async function K(t,e,r){console.log(t),(await WA.room.area.get(t)).setProperty(e,r)}function $(t,e,r){WA.room.setProperty(t,e,r),e==="visible"&&(r?WA.room.showLayer(t):WA.room.hideLayer(t))}const Me="https://admin.workadventu.re/html";let G,_=0,D=0;function z(t){if(WA.state[t.name]){let e=t.properties.mustGetString("openLayer");for(const r of e.split(`
`))WA.room.showLayer(r);e=t.properties.mustGetString("closeLayer");for(const r of e.split(`
`))WA.room.hideLayer(r)}else{let e=t.properties.mustGetString("openLayer");for(const r of e.split(`
`))WA.room.hideLayer(r);e=t.properties.mustGetString("closeLayer");for(const r of e.split(`
`))WA.room.showLayer(r)}}function ke(t){const e=t.properties.getString("openSound"),r=t.properties.getNumber("soundRadius");let i=1;if(r){const n=se(t.properties.mustGetString("openLayer").split(`
`));if(n>r)return;i=1-n/r}e&&WA.sound.loadSound(e).play({volume:i})}function Ne(t){const e=t.properties.getString("closeSound"),r=t.properties.getNumber("soundRadius");let i=1;if(r){const n=se(t.properties.mustGetString("closeLayer").split(`
`));if(n>r)return;i=1-n/r}e&&WA.sound.loadSound(e).play({volume:i})}function ne(t){return t.map(e=>G.get(e)).filter(e=>(e==null?void 0:e.type)==="tilelayer")}function se(t){const e=ne(t),r=re(e),i=((r.right-r.left)/2+r.left)*32,n=((r.bottom-r.top)/2+r.top)*32;return Math.sqrt(Math.pow(_-i,2)+Math.pow(D-n,2))}function Re(t){WA.state.onVariableChange(t.name).subscribe(()=>{WA.state[t.name]?ke(t):Ne(t),z(t)}),z(t)}function J(t,e,r,i){const n=t.name;let s,a,o=!1;const l=r.getString("tag");let f=!0;l&&!WA.player.tags.includes(l)&&(f=!1);const p=!!l;function g(){var u;s&&s.remove(),s=WA.ui.displayActionMessage({message:(u=r.getString("closeTriggerMessage"))!==null&&u!==void 0?u:"Press SPACE to close the door",callback:()=>{WA.state[e.name]=!1,h()}})}function h(){var u;s&&s.remove(),s=WA.ui.displayActionMessage({message:(u=r.getString("openTriggerMessage"))!==null&&u!==void 0?u:"Press SPACE to open the door",callback:()=>{WA.state[e.name]=!0,g()}})}function L(){let u;if(t.type==="tilelayer")u=re(ne(e.properties.mustGetString("closeLayer").split(`
`)));else{if(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)throw new Error(`Doorstep zone "${t.name}" is missing x, y, width or height`);u={top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}a=WA.room.website.create({name:"doorKeypad"+n,url:i+"/keypad.html#"+encodeURIComponent(n),position:{x:u.right*32,y:u.top*32,width:32*3,height:32*4},allowApi:!0})}function v(){a&&(WA.room.website.delete(a.name),a=void 0)}function c(){if(o=!0,r.getBoolean("autoOpen")&&f){WA.state[e.name]=!0;return}if(!WA.state[e.name]&&(p&&!f||!p)&&(r.getString("code")||r.getString("codeVariable"))){L();return}f&&(WA.state[e.name]?g():h())}function d(){o=!1,r.getBoolean("autoClose")&&(WA.state[e.name]=!1),s&&s.remove(),v()}t.type==="tilelayer"?(WA.room.onEnterLayer(n).subscribe(c),WA.room.onLeaveLayer(n).subscribe(d)):(WA.room.area.onEnter(n).subscribe(c),WA.room.area.onLeave(n).subscribe(d)),WA.state.onVariableChange(e.name).subscribe(()=>{o&&(!r.getBoolean("autoClose")&&WA.state[e.name]===!0&&g(),a&&WA.state[e.name]===!0&&v(),!r.getBoolean("autoOpen")&&WA.state[e.name]===!1&&h())})}function xe(t){const e=t.properties.mustGetString("bellSound"),r=t.properties.getNumber("soundRadius");let i=1;if(r){const n=Math.sqrt(Math.pow(t.x-_,2)+Math.pow(t.y-D,2));if(n>r)return;i=1-n/r}WA.sound.loadSound(e).play({volume:i})}function je(t){WA.state[t.name]===void 0&&(WA.state[t.name]=0),WA.state.onVariableChange(t.name).subscribe(()=>{WA.state[t.name]&&xe(t)})}function X(t,e,r){let i;const n=e.getString("bellPopup");if(r.type==="tilelayer"){const s=r.name;WA.room.onEnterLayer(s).subscribe(()=>{var a;n?i=WA.ui.openPopup(n,"",[{label:(a=e.getString("bellButtonText"))!==null&&a!==void 0?a:"Ring",callback:()=>{WA.state[t]=WA.state[t]+1}}]):WA.state[t]=WA.state[t]+1}),WA.room.onLeaveLayer(s).subscribe(()=>{i&&(i.close(),i=void 0)})}else{const s=r.name;WA.room.area.onEnter(s).subscribe(()=>{var a;n?i=WA.ui.openPopup(n,"",[{label:(a=e.getString("bellButtonText"))!==null&&a!==void 0?a:"Ring",callback:()=>{WA.state[t]=WA.state[t]+1}}]):WA.state[t]=WA.state[t]+1}),WA.room.area.onLeave(s).subscribe(()=>{i&&(i.close(),i=void 0)})}}async function Ve(t){t=t??Me;const e=await le();G=await R();for(const r of e.values())r.properties.get("door")&&Re(r),r.properties.get("bell")&&je(r);for(const r of G.values()){const i=new B(r.properties),n=i.getString("doorVariable");if(n&&r.type==="tilelayer"){const a=e.get(n);if(a===void 0)throw new Error('Cannot find variable "'+n+'" referred in the "doorVariable" property of layer "'+r.name+'"');J(r,a,i,t)}const s=i.getString("bellVariable");s&&r.type==="tilelayer"&&X(s,i,r)}for(const r of await te()){const i=new B(r.properties),n=i.getString("doorVariable");if(n){const a=e.get(n);if(a===void 0)throw new Error('Cannot find variable "'+n+'" referred in the "doorVariable" property of object "'+r.name+'"');J(r,a,i,t)}const s=i.getString("bellVariable");s&&X(s,i,r)}WA.player.onPlayerMove(r=>{_=r.x,D=r.y})}function Ie(t,e){const r=t.getString("bindVariable");if(r){const i=t.get("enterValue"),n=t.get("leaveValue"),s=t.getString("triggerMessage"),a=t.getString("tag");Ge(r,e,i,n,s,a)}}function Ge(t,e,r,i,n,s){s&&!WA.player.tags.includes(s)||(r!==void 0&&WA.room.onEnterLayer(e).subscribe(()=>{n||(WA.state[t]=r)}),i!==void 0&&WA.room.onLeaveLayer(e).subscribe(()=>{WA.state[t]=i}))}async function Oe(){const t=await R();for(const e of t.values()){const r=new B(e.properties);Ie(r,e.name)}}let Y;async function _e(t){const e=await WA.room.getTiledMap();t=t??F,Y=await R();const r=e.layers.find(i=>i.name==="configuration");if(r){const n=new B(r.properties).getString("tag");(!n||WA.player.tags.includes(n))&&WA.ui.registerMenuCommand("Configure the room",()=>{WA.nav.openCoWebSite(t+"/configuration.html",!0)});for(const s of Y.values()){const a=new B(s.properties),o=a.getString("openConfig");o&&s.type==="tilelayer"&&De(o.split(","),s.name,a)}}}function De(t,e,r){let i;const n=r.getString("openConfigAdminTag");let s=!0;n&&!WA.player.tags.includes(n)&&(s=!1);function a(){var l;i&&i.remove(),i=WA.ui.displayActionMessage({message:(l=r.getString("openConfigTriggerMessage"))!==null&&l!==void 0?l:"Press SPACE or touch here to configure",callback:()=>U(t)})}function o(){WA.nav.closeCoWebSite()}WA.room.onEnterLayer(e).subscribe(()=>{const l=r.getString("openConfigTrigger");s&&(l&&l==="onaction"?a():U(t))}),WA.room.onLeaveLayer(e).subscribe(()=>{i&&i.remove(),o()})}function Ue(){return WA.onInit().then(()=>{Ve().catch(t=>console.error(t)),Oe().catch(t=>console.error(t)),_e().catch(t=>console.error(t)),Be().catch(t=>console.error(t)),Te().catch(t=>console.error(t))}).catch(t=>console.error(t))}console.log("Script started successfully");let j;WA.onInit().then(async()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags);let t,e,r,i,n,s,a,o,l,f,p,g,h,L,v,c,d,u,b,m,A,y,E,C,w,T;try{t=await WA.room.website.get("poster-1"),t.visible=!1,e=await WA.room.website.get("poster-2"),e.visible=!1,r=await WA.room.website.get("poster-3"),r.visible=!1,i=await WA.room.website.get("poster-4"),i.visible=!1,n=await WA.room.website.get("poster-5"),n.visible=!1,s=await WA.room.website.get("poster-6"),s.visible=!1,a=await WA.room.website.get("poster-7"),a.visible=!1,o=await WA.room.website.get("name-plate-bsn-1"),o.visible=!1,l=await WA.room.website.get("name-plate-bsn-2"),l.visible=!1,f=await WA.room.website.get("name-plate-bsn-3"),f.visible=!1,p=await WA.room.website.get("name-plate-bsn-4"),p.visible=!1,g=await WA.room.website.get("name-plate-bsn-5"),g.visible=!1,h=await WA.room.website.get("name-plate-bsn-6"),h.visible=!1,L=await WA.room.website.get("name-plate-bsn-7"),L.visible=!1}catch(P){P instanceof Error&&console.log(P.message)}try{v=await WA.room.website.get("name-plate-eng-1"),v.visible=!1,c=await WA.room.website.get("name-plate-eng-2"),c.visible=!1,d=await WA.room.website.get("name-plate-eng-5"),d.visible=!1,u=await WA.room.website.get("name-plate-eng-6"),u.visible=!1,b=await WA.room.website.get("name-plate-eng-7"),b.visible=!1}catch(P){P instanceof Error&&console.log(P.message)}try{m=await WA.room.website.get("name-plate-hs-1"),m.visible=!1,A=await WA.room.website.get("name-plate-hs-2"),A.visible=!1,y=await WA.room.website.get("name-plate-hs-3"),y.visible=!1,E=await WA.room.website.get("name-plate-hs-4"),E.visible=!1,C=await WA.room.website.get("name-plate-hs-5"),C.visible=!1,w=await WA.room.website.get("name-plate-hs-6"),w.visible=!1,T=await WA.room.website.get("name-plate-hs-7"),T.visible=!1}catch(P){P instanceof Error&&console.log(P.message)}WA.room.area.onEnter("clock").subscribe(()=>{const P=new Date,ae=P.getHours()+":"+P.getMinutes();j=WA.ui.openPopup("clockPopup","It's "+ae,[])}),WA.room.area.onLeave("clock").subscribe(He),WA.room.onEnterLayer("floor").subscribe(()=>{t&&(t.visible=!0),e&&(e.visible=!0),r&&(r.visible=!0),i&&(i.visible=!0),n&&(n.visible=!0),s&&(s.visible=!0),a&&(a.visible=!0),a&&(a.visible=!0),o&&(o.visible=!0),l&&(l.visible=!0),f&&(f.visible=!0),p&&(p.visible=!0),g&&(g.visible=!0),h&&(h.visible=!0),L&&(L.visible=!0),v&&(v.visible=!0),c&&(c.visible=!0),d&&(d.visible=!0),u&&(u.visible=!0),b&&(b.visible=!0),m&&(m.visible=!0),A&&(A.visible=!0),y&&(y.visible=!0),E&&(E.visible=!0),C&&(C.visible=!0),w&&(w.visible=!0),T&&(T.visible=!0),WA.room.hideLayer("roof"),WA.room.hideLayer("roof-appear"),WA.room.hideLayer("walls-bg-front"),WA.room.hideLayer("sign")}),WA.room.onLeaveLayer("floor").subscribe(()=>{t&&(t.visible=!1),e&&(e.visible=!1),r&&(r.visible=!1),i&&(i.visible=!1),n&&(n.visible=!1),s&&(s.visible=!1),a&&(a.visible=!1),a&&(a.visible=!1),o&&(o.visible=!1),l&&(l.visible=!1),f&&(f.visible=!1),p&&(p.visible=!1),g&&(g.visible=!1),h&&(h.visible=!1),L&&(L.visible=!1),v&&(v.visible=!1),c&&(c.visible=!1),d&&(d.visible=!1),u&&(u.visible=!1),b&&(b.visible=!1),m&&(m.visible=!1),A&&(A.visible=!1),y&&(y.visible=!1),E&&(E.visible=!1),C&&(C.visible=!1),w&&(w.visible=!1),T&&(T.visible=!1),WA.room.showLayer("roof"),WA.room.showLayer("walls-bg-front"),WA.room.showLayer("facade-furniture-bg"),WA.room.showLayer("sign")}),WA.room.onEnterLayer("rooms_floor").subscribe(()=>{o&&(o.visible=!1),l&&(l.visible=!1),f&&(f.visible=!1),v&&(v.visible=!1),c&&(c.visible=!1),m&&(m.visible=!1),A&&(A.visible=!1),y&&(y.visible=!1),WA.room.hideLayer("facade-furniture-fg"),WA.room.hideLayer("facade"),WA.room.hideLayer("facade-furniture-bg")}),WA.room.onLeaveLayer("rooms_floor").subscribe(()=>{o&&(o.visible=!0),l&&(l.visible=!0),f&&(f.visible=!0),v&&(v.visible=!0),c&&(c.visible=!0),m&&(m.visible=!0),A&&(A.visible=!0),y&&(y.visible=!0),WA.room.showLayer("facade-furniture-fg"),WA.room.showLayer("facade"),WA.room.showLayer("facade-furniture-bg")}),Ue().then(()=>{console.log("Scripting API Extra ready")}).catch(P=>console.error(P))}).catch(t=>console.error(t));function He(){j!==void 0&&(j.close(),j=void 0)}async function Q(t){const e="https://apps.taskmagic.com/api/v1/webhooks/fAMWFBR7C00th7adAaD5g",{uuid:r,name:i}=WA.player;if(!r||!i){console.error("Invalid player data");return}const n=WA.room.id,s=Date.now(),a={id:r,name:i,roomId:n,firstPing:t,timestamp:s},o=(l,f,p=5e3)=>Promise.race([fetch(l,f),new Promise((g,h)=>setTimeout(()=>h(new Error("Request timed out")),p))]);try{const l=await o(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const f=await l.json();console.log("Success:",f)}catch(l){console.error("Error:",l)}}WA.onInit().then(()=>{if(WA.player.tags.includes("bot"))return;let t=!0;Q(t),t=!1,setInterval(()=>{Q(t)},3e5)});
//# sourceMappingURL=main-58b8a848.js.map
