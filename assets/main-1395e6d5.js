class R{constructor(e){this.properties=e??[]}get(e){const r=this.properties.filter(s=>s.name===e).map(s=>s.value);if(r.length>1)throw new Error('Expected only one property to be named "'+e+'"');if(r.length!==0)return r[0]}getString(e){return this.getByType(e,"string")}getNumber(e){return this.getByType(e,"number")}getBoolean(e){return this.getByType(e,"boolean")}getByType(e,r){const s=this.get(e);if(s!==void 0){if(r!=="json"&&typeof s!==r)throw new Error('Expected property "'+e+'" to have type "'+r+'"');return s}}mustGetString(e){return this.mustGetByType(e,"string")}mustGetNumber(e){return this.mustGetByType(e,"number")}mustGetBoolean(e){return this.mustGetByType(e,"boolean")}mustGetByType(e,r){const s=this.get(e);if(s===void 0)throw new Error('Property "'+e+'" is missing');if(r!=="json"&&typeof s!==r)throw new Error('Expected property "'+e+'" to have type "'+r+'"');return s}getType(e){const r=this.properties.filter(s=>s.name===e).map(s=>s.type);if(r.length>1)throw new Error('Expected only one property to be named "'+e+'"');if(r.length!==0)return r[0]}}const ee="https://unpkg.com/@workadventure/scripting-api-extra@1.9.1/dist";class fe{constructor(e){this.name=e.name,this.x=e.x,this.y=e.y,this.properties=new R(e.properties)}get isReadable(){const e=this.properties.getString("readableBy");return e?WA.player.tags.includes(e):!0}get isWritable(){const e=this.properties.getString("writableBy");return e?WA.player.tags.includes(e):!0}}function O(t){const e=t?"#"+t.join():"";WA.nav.openCoWebSite(ee+"/configuration.html"+e,!0)}async function pe(t,e){const r=await WA.room.getTiledMap(),s=new Map;return te(r.layers,s,t,e),s}function te(t,e,r,s){for(const n of t)if(n.type==="objectgroup"){for(const o of n.objects)if(o.type==="variable"||o.class==="variable"){if(r&&n.name!==r||s&&!s.includes(o.name))continue;e.set(o.name,new fe(o))}}else n.type==="group"&&te(n.layers,e,r,s)}let j;async function _(){return j===void 0&&(j=be()),j}async function be(){return he(await WA.room.getTiledMap())}function he(t){const e=new Map;return re(t.layers,"",e),e}function re(t,e,r){for(const s of t)s.type==="group"?re(s.layers,e+s.name+"/",r):(s.name=e+s.name,r.set(s.name,s))}async function se(){const t=await _(),e=[];for(const r of t.values())if(r.type==="objectgroup")for(const s of r.objects)(s.type==="area"||s.class==="area")&&e.push(s);return e}function ge(t){let e=1/0,r=1/0,s=0,n=0;const o=t.data;if(typeof o=="string")throw new Error("Unsupported tile layer data stored as string instead of CSV");for(let i=0;i<t.height;i++)for(let a=0;a<t.width;a++)o[a+i*t.width]!==0&&(e=Math.min(e,a),n=Math.max(n,a),r=Math.min(r,i),s=Math.max(s,i));return{top:r,left:e,right:n+1,bottom:s+1}}function ne(t){let e=1/0,r=1/0,s=0,n=0;for(const o of t){const i=ge(o);i.left<e&&(e=i.left),i.top<r&&(r=i.top),i.right>n&&(n=i.right),i.bottom>s&&(s=i.bottom)}return{top:r,left:e,right:n,bottom:s}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var ye=Object.prototype.toString,U=Array.isArray||function(e){return ye.call(e)==="[object Array]"};function V(t){return typeof t=="function"}function de(t){return U(t)?"array":typeof t}function x(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function D(t,e){return t!=null&&typeof t=="object"&&e in t}function me(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var ve=RegExp.prototype.test;function we(t,e){return ve.call(t,e)}var Ae=/\S/;function We(t){return!we(Ae,t)}var Le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Ee(t){return String(t).replace(/[&<>"'`=\/]/g,function(r){return Le[r]})}var Se=/\s*/,Pe=/\s+/,$=/\s*=/,Te=/\s*\}/,Ce=/#|\^|\/|>|\{|&|=|!/;function ke(t,e){if(!t)return[];var r=!1,s=[],n=[],o=[],i=!1,a=!1,l="",u=0;function p(){if(i&&!a)for(;o.length;)delete n[o.pop()];else o=[];i=!1,a=!1}var b,h,C;function m(w){if(typeof w=="string"&&(w=w.split(Pe,2)),!U(w)||w.length!==2)throw new Error("Invalid tags: "+w);b=new RegExp(x(w[0])+"\\s*"),h=new RegExp("\\s*"+x(w[1])),C=new RegExp("\\s*"+x("}"+w[1]))}m(e||E.tags);for(var f=new N(t),y,c,g,v,W,d;!f.eos();){if(y=f.pos,g=f.scanUntil(b),g)for(var k=0,B=g.length;k<B;++k)v=g.charAt(k),We(v)?(o.push(n.length),l+=v):(a=!0,r=!0,l+=" "),n.push(["text",v,y,y+1]),y+=1,v===`
`&&(p(),l="",u=0,r=!1);if(!f.scan(b))break;if(i=!0,c=f.scan(Ce)||"name",f.scan(Se),c==="="?(g=f.scanUntil($),f.scan($),f.scanUntil(h)):c==="{"?(g=f.scanUntil(C),f.scan(Te),f.scanUntil(h),c="&"):g=f.scanUntil(h),!f.scan(h))throw new Error("Unclosed tag at "+f.pos);if(c==">"?W=[c,g,y,f.pos,l,u,r]:W=[c,g,y,f.pos],u++,n.push(W),c==="#"||c==="^")s.push(W);else if(c==="/"){if(d=s.pop(),!d)throw new Error('Unopened section "'+g+'" at '+y);if(d[1]!==g)throw new Error('Unclosed section "'+d[1]+'" at '+y)}else c==="name"||c==="{"||c==="&"?a=!0:c==="="&&m(g)}if(p(),d=s.pop(),d)throw new Error('Unclosed section "'+d[1]+'" at '+f.pos);return qe(Be(n))}function Be(t){for(var e=[],r,s,n=0,o=t.length;n<o;++n)r=t[n],r&&(r[0]==="text"&&s&&s[0]==="text"?(s[1]+=r[1],s[3]=r[3]):(e.push(r),s=r));return e}function qe(t){for(var e=[],r=e,s=[],n,o,i=0,a=t.length;i<a;++i)switch(n=t[i],n[0]){case"#":case"^":r.push(n),s.push(n),r=n[4]=[];break;case"/":o=s.pop(),o[5]=n[2],r=s.length>0?s[s.length-1][4]:e;break;default:r.push(n)}return e}function N(t){this.string=t,this.tail=t,this.pos=0}N.prototype.eos=function(){return this.tail===""};N.prototype.scan=function(e){var r=this.tail.match(e);if(!r||r.index!==0)return"";var s=r[0];return this.tail=this.tail.substring(s.length),this.pos+=s.length,s};N.prototype.scanUntil=function(e){var r=this.tail.search(e),s;switch(r){case-1:s=this.tail,this.tail="";break;case 0:s="";break;default:s=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=s.length,s};function H(t,e){this.view=t,this.cache={".":this.view},this.parent=e}H.prototype.push=function(e){return new H(e,this)};H.prototype.lookup=function(e){var r=this.cache,s;if(r.hasOwnProperty(e))s=r[e];else{for(var n=this,o,i,a,l=!1;n;){if(e.indexOf(".")>0)for(o=n.view,i=e.split("."),a=0;o!=null&&a<i.length;)a===i.length-1&&(l=D(o,i[a])||me(o,i[a])),o=o[i[a++]];else o=n.view[e],l=D(n.view,e);if(l){s=o;break}n=n.parent}r[e]=s}return V(s)&&(s=s.call(this.view)),s};function L(){this.templateCache={_cache:{},set:function(e,r){this._cache[e]=r},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}L.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};L.prototype.parse=function(e,r){var s=this.templateCache,n=e+":"+(r||E.tags).join(":"),o=typeof s<"u",i=o?s.get(n):void 0;return i==null&&(i=ke(e,r),o&&s.set(n,i)),i};L.prototype.render=function(e,r,s,n){var o=this.getConfigTags(n),i=this.parse(e,o),a=r instanceof H?r:new H(r,void 0);return this.renderTokens(i,a,s,e,n)};L.prototype.renderTokens=function(e,r,s,n,o){for(var i="",a,l,u,p=0,b=e.length;p<b;++p)u=void 0,a=e[p],l=a[0],l==="#"?u=this.renderSection(a,r,s,n,o):l==="^"?u=this.renderInverted(a,r,s,n,o):l===">"?u=this.renderPartial(a,r,s,o):l==="&"?u=this.unescapedValue(a,r):l==="name"?u=this.escapedValue(a,r,o):l==="text"&&(u=this.rawValue(a)),u!==void 0&&(i+=u);return i};L.prototype.renderSection=function(e,r,s,n,o){var i=this,a="",l=r.lookup(e[1]);function u(h){return i.render(h,r,s,o)}if(l){if(U(l))for(var p=0,b=l.length;p<b;++p)a+=this.renderTokens(e[4],r.push(l[p]),s,n,o);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")a+=this.renderTokens(e[4],r.push(l),s,n,o);else if(V(l)){if(typeof n!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(r.view,n.slice(e[3],e[5]),u),l!=null&&(a+=l)}else a+=this.renderTokens(e[4],r,s,n,o);return a}};L.prototype.renderInverted=function(e,r,s,n,o){var i=r.lookup(e[1]);if(!i||U(i)&&i.length===0)return this.renderTokens(e[4],r,s,n,o)};L.prototype.indentPartial=function(e,r,s){for(var n=r.replace(/[^ \t]/g,""),o=e.split(`
`),i=0;i<o.length;i++)o[i].length&&(i>0||!s)&&(o[i]=n+o[i]);return o.join(`
`)};L.prototype.renderPartial=function(e,r,s,n){if(s){var o=this.getConfigTags(n),i=V(s)?s(e[1]):s[e[1]];if(i!=null){var a=e[6],l=e[5],u=e[4],p=i;l==0&&u&&(p=this.indentPartial(i,u,a));var b=this.parse(p,o);return this.renderTokens(b,r,s,p,n)}}};L.prototype.unescapedValue=function(e,r){var s=r.lookup(e[1]);if(s!=null)return s};L.prototype.escapedValue=function(e,r,s){var n=this.getConfigEscape(s)||E.escape,o=r.lookup(e[1]);if(o!=null)return typeof o=="number"&&n===E.escape?String(o):n(o)};L.prototype.rawValue=function(e){return e[1]};L.prototype.getConfigTags=function(e){return U(e)?e:e&&typeof e=="object"?e.tags:void 0};L.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!U(e))return e.escape};var E={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){M.templateCache=t},get templateCache(){return M.templateCache}},M=new L;E.clearCache=function(){return M.clearCache()};E.parse=function(e,r){return M.parse(e,r)};E.render=function(e,r,s,n){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+de(e)+'" was given as the first argument for mustache#render(template, view, partials)');return M.render(e,r,s,n)};E.escape=Ee;E.Scanner=N;E.Context=H;E.Writer=L;class oe{constructor(e,r){this.template=e,this.state=r,this.ast=E.parse(e)}getValue(){return this.value===void 0&&(this.value=E.render(this.template,this.state)),this.value}onChange(e){const r=[];for(const s of this.getUsedVariables().values())r.push(this.state.onVariableChange(s).subscribe(()=>{const n=E.render(this.template,this.state);n!==this.value&&(this.value=n,e(this.value))}));return{unsubscribe:()=>{for(const s of r)s.unsubscribe()}}}isPureString(){return this.ast.length===0||this.ast.length===1&&this.ast[0][0]==="text"}getUsedVariables(){const e=new Set;return this.recursiveGetUsedVariables(this.ast,e),e}recursiveGetUsedVariables(e,r){for(const s of e){const n=s[0],o=s[1],i=s[4];["name","&","#","^"].includes(n)&&r.add(o),i!==void 0&&typeof i!="string"&&this.recursiveGetUsedVariables(i,r)}}}async function Re(){var t;const e=await se();for(const r of e){const s=(t=r.properties)!==null&&t!==void 0?t:[];for(const n of s){if(n.type==="int"||n.type==="bool"||n.type==="object"||typeof n.value!="string")continue;const o=new oe(n.value,WA.state);if(o.isPureString())continue;const i=o.getValue();await z(r.name,n.name,i),o.onChange(async a=>{await z(r.name,n.name,a)})}}}async function He(){var t;const e=await _();for(const[r,s]of e.entries())if(s.type!=="objectgroup"){const n=(t=s.properties)!==null&&t!==void 0?t:[];for(const o of n){if(o.type==="int"||o.type==="bool"||o.type==="object"||typeof o.value!="string")continue;const i=new oe(o.value,WA.state);if(i.isPureString())continue;const a=i.getValue();K(r,o.name,a),i.onChange(l=>{K(r,o.name,l)})}}}async function z(t,e,r){console.log(t),(await WA.room.area.get(t)).setProperty(e,r)}function K(t,e,r){WA.room.setProperty(t,e,r),e==="visible"&&(r?WA.room.showLayer(t):WA.room.hideLayer(t))}const Ue="https://admin.workadventu.re/html";let Q,G=0,I=0;function J(t){if(WA.state[t.name]){let e=t.properties.mustGetString("openLayer");for(const r of e.split(`
`))WA.room.showLayer(r);e=t.properties.mustGetString("closeLayer");for(const r of e.split(`
`))WA.room.hideLayer(r)}else{let e=t.properties.mustGetString("openLayer");for(const r of e.split(`
`))WA.room.hideLayer(r);e=t.properties.mustGetString("closeLayer");for(const r of e.split(`
`))WA.room.showLayer(r)}}function Me(t){const e=t.properties.getString("openSound"),r=t.properties.getNumber("soundRadius");let s=1;if(r){const n=ae(t.properties.mustGetString("openLayer").split(`
`));if(n>r)return;s=1-n/r}e&&WA.sound.loadSound(e).play({volume:s})}function _e(t){const e=t.properties.getString("closeSound"),r=t.properties.getNumber("soundRadius");let s=1;if(r){const n=ae(t.properties.mustGetString("closeLayer").split(`
`));if(n>r)return;s=1-n/r}e&&WA.sound.loadSound(e).play({volume:s})}function ie(t){return t.map(e=>Q.get(e)).filter(e=>(e==null?void 0:e.type)==="tilelayer")}function ae(t){const e=ie(t),r=ne(e),s=((r.right-r.left)/2+r.left)*32,n=((r.bottom-r.top)/2+r.top)*32;return Math.sqrt(Math.pow(G-s,2)+Math.pow(I-n,2))}function Ne(t){WA.state.onVariableChange(t.name).subscribe(()=>{WA.state[t.name]?Me(t):_e(t),J(t)}),J(t)}function X(t,e,r,s){const n=t.name;let o,i,a=!1;const l=r.getString("tag");let u=!0;l&&!WA.player.tags.includes(l)&&(u=!1);const p=!!l;function b(){var c;o&&o.remove(),o=WA.ui.displayActionMessage({message:(c=r.getString("closeTriggerMessage"))!==null&&c!==void 0?c:"Press SPACE to close the door",callback:()=>{WA.state[e.name]=!1,h()}})}function h(){var c;o&&o.remove(),o=WA.ui.displayActionMessage({message:(c=r.getString("openTriggerMessage"))!==null&&c!==void 0?c:"Press SPACE to open the door",callback:()=>{WA.state[e.name]=!0,b()}})}function C(){let c;if(t.type==="tilelayer")c=ne(ie(e.properties.mustGetString("closeLayer").split(`
`)));else{if(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)throw new Error(`Doorstep zone "${t.name}" is missing x, y, width or height`);c={top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}i=WA.room.website.create({name:"doorKeypad"+n,url:s+"/keypad.html#"+encodeURIComponent(n),position:{x:c.right*32,y:c.top*32,width:32*3,height:32*4},allowApi:!0})}function m(){i&&(WA.room.website.delete(i.name),i=void 0)}function f(){if(a=!0,r.getBoolean("autoOpen")&&u){WA.state[e.name]=!0;return}if(!WA.state[e.name]&&(p&&!u||!p)&&(r.getString("code")||r.getString("codeVariable"))){C();return}u&&(WA.state[e.name]?b():h())}function y(){a=!1,r.getBoolean("autoClose")&&(WA.state[e.name]=!1),o&&o.remove(),m()}t.type==="tilelayer"?(WA.room.onEnterLayer(n).subscribe(f),WA.room.onLeaveLayer(n).subscribe(y)):(WA.room.area.onEnter(n).subscribe(f),WA.room.area.onLeave(n).subscribe(y)),WA.state.onVariableChange(e.name).subscribe(()=>{a&&(!r.getBoolean("autoClose")&&WA.state[e.name]===!0&&b(),i&&WA.state[e.name]===!0&&m(),!r.getBoolean("autoOpen")&&WA.state[e.name]===!1&&h())})}function je(t){const e=t.properties.mustGetString("bellSound"),r=t.properties.getNumber("soundRadius");let s=1;if(r){const n=Math.sqrt(Math.pow(t.x-G,2)+Math.pow(t.y-I,2));if(n>r)return;s=1-n/r}WA.sound.loadSound(e).play({volume:s})}function xe(t){WA.state[t.name]===void 0&&(WA.state[t.name]=0),WA.state.onVariableChange(t.name).subscribe(()=>{WA.state[t.name]&&je(t)})}function Y(t,e,r){let s;const n=e.getString("bellPopup");if(r.type==="tilelayer"){const o=r.name;WA.room.onEnterLayer(o).subscribe(()=>{var i;n?s=WA.ui.openPopup(n,"",[{label:(i=e.getString("bellButtonText"))!==null&&i!==void 0?i:"Ring",callback:()=>{WA.state[t]=WA.state[t]+1}}]):WA.state[t]=WA.state[t]+1}),WA.room.onLeaveLayer(o).subscribe(()=>{s&&(s.close(),s=void 0)})}else{const o=r.name;WA.room.area.onEnter(o).subscribe(()=>{var i;n?s=WA.ui.openPopup(n,"",[{label:(i=e.getString("bellButtonText"))!==null&&i!==void 0?i:"Ring",callback:()=>{WA.state[t]=WA.state[t]+1}}]):WA.state[t]=WA.state[t]+1}),WA.room.area.onLeave(o).subscribe(()=>{s&&(s.close(),s=void 0)})}}async function Qe(t){t=t??Ue;const e=await pe();Q=await _();for(const r of e.values())r.properties.get("door")&&Ne(r),r.properties.get("bell")&&xe(r);for(const r of Q.values()){const s=new R(r.properties),n=s.getString("doorVariable");if(n&&r.type==="tilelayer"){const i=e.get(n);if(i===void 0)throw new Error('Cannot find variable "'+n+'" referred in the "doorVariable" property of layer "'+r.name+'"');X(r,i,s,t)}const o=s.getString("bellVariable");o&&r.type==="tilelayer"&&Y(o,s,r)}for(const r of await se()){const s=new R(r.properties),n=s.getString("doorVariable");if(n){const i=e.get(n);if(i===void 0)throw new Error('Cannot find variable "'+n+'" referred in the "doorVariable" property of object "'+r.name+'"');X(r,i,s,t)}const o=s.getString("bellVariable");o&&Y(o,s,r)}WA.player.onPlayerMove(r=>{G=r.x,I=r.y})}function Ve(t,e){const r=t.getString("bindVariable");if(r){const s=t.get("enterValue"),n=t.get("leaveValue"),o=t.getString("triggerMessage"),i=t.getString("tag");Ge(r,e,s,n,o,i)}}function Ge(t,e,r,s,n,o){o&&!WA.player.tags.includes(o)||(r!==void 0&&WA.room.onEnterLayer(e).subscribe(()=>{n||(WA.state[t]=r)}),s!==void 0&&WA.room.onLeaveLayer(e).subscribe(()=>{WA.state[t]=s}))}async function Ie(){const t=await _();for(const e of t.values()){const r=new R(e.properties);Ve(r,e.name)}}let F;async function Oe(t){const e=await WA.room.getTiledMap();t=t??ee,F=await _();const r=e.layers.find(s=>s.name==="configuration");if(r){const n=new R(r.properties).getString("tag");(!n||WA.player.tags.includes(n))&&WA.ui.registerMenuCommand("Configure the room",()=>{WA.nav.openCoWebSite(t+"/configuration.html",!0)});for(const o of F.values()){const i=new R(o.properties),a=i.getString("openConfig");a&&o.type==="tilelayer"&&De(a.split(","),o.name,i)}}}function De(t,e,r){let s;const n=r.getString("openConfigAdminTag");let o=!0;n&&!WA.player.tags.includes(n)&&(o=!1);function i(){var l;s&&s.remove(),s=WA.ui.displayActionMessage({message:(l=r.getString("openConfigTriggerMessage"))!==null&&l!==void 0?l:"Press SPACE or touch here to configure",callback:()=>O(t)})}function a(){WA.nav.closeCoWebSite()}WA.room.onEnterLayer(e).subscribe(()=>{const l=r.getString("openConfigTrigger");o&&(l&&l==="onaction"?i():O(t))}),WA.room.onLeaveLayer(e).subscribe(()=>{s&&s.remove(),a()})}function $e(){return WA.onInit().then(()=>{Qe().catch(t=>console.error(t)),Ie().catch(t=>console.error(t)),Oe().catch(t=>console.error(t)),He().catch(t=>console.error(t)),Re().catch(t=>console.error(t))}).catch(t=>console.error(t))}let le="https://admin.workadventu.re";function ue(){const t=WA.player.userRoomToken;if(t===void 0)throw new Error("No userRoomToken found. The quests plugin can only work with WorkAdventure SAAS edition (at https://play.workadventu.re).");return t}async function T(t,e){if(!WA.player.isLogged)throw new Error("You must be logged to gain XP.");const r=new URL(`/api/quests/${t}/level-up`,le),s=await fetch(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:ue()},body:JSON.stringify({xp:e})});if(!s.ok)throw new Error(`An error occurred. HTTP Code: ${s.status} ${s.statusText}.`);const n=await s.json();return n.awardedBadges.length>0&&(async()=>{for(const o of n.awardedBadges)await ze(t,o)})().catch(o=>{console.error(o)}),n}async function ze(t,e){const r=new URL(`/quests/${t}/badge/${e}/congratulations`,le);r.search=new URLSearchParams({token:ue()}).toString(),await WA.ui.website.open({url:r.toString(),position:{vertical:"middle",horizontal:"middle"},allowApi:!0,visible:!0,size:{width:"100%",height:"100%"}})}console.log("Script started successfully");let A;WA.onInit().then(async()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags);let t,e,r,s,n,o,i,a,l,u,p,b,h,C,m,f,y,c,g,v,W,d,k,B,w,q;try{t=await WA.room.website.get("poster-1"),t.visible=!1,e=await WA.room.website.get("poster-2"),e.visible=!1,r=await WA.room.website.get("poster-3"),r.visible=!1,s=await WA.room.website.get("poster-4"),s.visible=!1,n=await WA.room.website.get("poster-5"),n.visible=!1,o=await WA.room.website.get("poster-6"),o.visible=!1,i=await WA.room.website.get("poster-7"),i.visible=!1,a=await WA.room.website.get("name-plate-bsn-1"),a.visible=!1,l=await WA.room.website.get("name-plate-bsn-2"),l.visible=!1,u=await WA.room.website.get("name-plate-bsn-3"),u.visible=!1,p=await WA.room.website.get("name-plate-bsn-4"),p.visible=!1,b=await WA.room.website.get("name-plate-bsn-5"),b.visible=!1,h=await WA.room.website.get("name-plate-bsn-6"),h.visible=!1,C=await WA.room.website.get("name-plate-bsn-7"),C.visible=!1}catch(S){S instanceof Error&&console.log(S.message)}try{m=await WA.room.website.get("name-plate-eng-1"),m.visible=!1,f=await WA.room.website.get("name-plate-eng-2"),f.visible=!1,y=await WA.room.website.get("name-plate-eng-5"),y.visible=!1,c=await WA.room.website.get("name-plate-eng-6"),c.visible=!1,g=await WA.room.website.get("name-plate-eng-7"),g.visible=!1}catch(S){S instanceof Error&&console.log(S.message)}try{v=await WA.room.website.get("name-plate-hs-1"),v.visible=!1,W=await WA.room.website.get("name-plate-hs-2"),W.visible=!1,d=await WA.room.website.get("name-plate-hs-3"),d.visible=!1,k=await WA.room.website.get("name-plate-hs-4"),k.visible=!1,B=await WA.room.website.get("name-plate-hs-5"),B.visible=!1,w=await WA.room.website.get("name-plate-hs-6"),w.visible=!1,q=await WA.room.website.get("name-plate-hs-7"),q.visible=!1}catch(S){S instanceof Error&&console.log(S.message)}WA.room.area.onEnter("clock").subscribe(()=>{const S=new Date,ce=S.getHours()+":"+S.getMinutes();A=WA.ui.openPopup("clockPopup","It's "+ce,[])}),WA.room.area.onLeave("clock").subscribe(P),WA.room.onEnterLayer("floor").subscribe(()=>{t&&(t.visible=!0),e&&(e.visible=!0),r&&(r.visible=!0),s&&(s.visible=!0),n&&(n.visible=!0),o&&(o.visible=!0),i&&(i.visible=!0),i&&(i.visible=!0),a&&(a.visible=!0),l&&(l.visible=!0),u&&(u.visible=!0),p&&(p.visible=!0),b&&(b.visible=!0),h&&(h.visible=!0),C&&(C.visible=!0),m&&(m.visible=!0),f&&(f.visible=!0),y&&(y.visible=!0),c&&(c.visible=!0),g&&(g.visible=!0),v&&(v.visible=!0),W&&(W.visible=!0),d&&(d.visible=!0),k&&(k.visible=!0),B&&(B.visible=!0),w&&(w.visible=!0),q&&(q.visible=!0),WA.room.hideLayer("roof"),WA.room.hideLayer("roof-appear"),WA.room.hideLayer("walls-bg-front"),WA.room.hideLayer("sign")}),WA.room.onLeaveLayer("floor").subscribe(()=>{t&&(t.visible=!1),e&&(e.visible=!1),r&&(r.visible=!1),s&&(s.visible=!1),n&&(n.visible=!1),o&&(o.visible=!1),i&&(i.visible=!1),i&&(i.visible=!1),a&&(a.visible=!1),l&&(l.visible=!1),u&&(u.visible=!1),p&&(p.visible=!1),b&&(b.visible=!1),h&&(h.visible=!1),C&&(C.visible=!1),m&&(m.visible=!1),f&&(f.visible=!1),y&&(y.visible=!1),c&&(c.visible=!1),g&&(g.visible=!1),v&&(v.visible=!1),W&&(W.visible=!1),d&&(d.visible=!1),k&&(k.visible=!1),B&&(B.visible=!1),w&&(w.visible=!1),q&&(q.visible=!1),WA.room.showLayer("roof"),WA.room.showLayer("walls-bg-front"),WA.room.showLayer("facade-furniture-bg"),WA.room.showLayer("sign")}),WA.room.onEnterLayer("rooms_floor").subscribe(()=>{a&&(a.visible=!1),l&&(l.visible=!1),u&&(u.visible=!1),m&&(m.visible=!1),f&&(f.visible=!1),v&&(v.visible=!1),W&&(W.visible=!1),d&&(d.visible=!1),WA.room.hideLayer("facade-furniture-fg"),WA.room.hideLayer("facade"),WA.room.hideLayer("facade-furniture-bg")}),WA.room.onLeaveLayer("rooms_floor").subscribe(()=>{a&&(a.visible=!0),l&&(l.visible=!0),u&&(u.visible=!0),m&&(m.visible=!0),f&&(f.visible=!0),v&&(v.visible=!0),W&&(W.visible=!0),d&&(d.visible=!0),WA.room.showLayer("facade-furniture-fg"),WA.room.showLayer("facade"),WA.room.showLayer("facade-furniture-bg")}),$e().then(()=>{console.log("Scripting API Extra ready")}).catch(S=>console.error(S)),WA.room.onEnterLayer("hercules-quest-1").subscribe(async()=>{await T("HERCULES_QUEST_1",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-2").subscribe(async()=>{await T("HERCULES_QUEST_2",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-3").subscribe(async()=>{await T("HERCULES_QUEST_3",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-4").subscribe(async()=>{await T("HERCULES_QUEST_4",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-5").subscribe(async()=>{await T("HERCULES_QUEST_5",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-6").subscribe(async()=>{await T("HERCULES_QUEST_6",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-7").subscribe(async()=>{await T("HERCULES_QUEST_7",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-8").subscribe(async()=>{await T("HERCULES_QUEST_8",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-9").subscribe(async()=>{await T("HERCULES_QUEST_9",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-10").subscribe(async()=>{await T("HERCULES_QUEST_10",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-11").subscribe(async()=>{await T("HERCULES_QUEST_11",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-12").subscribe(async()=>{await T("HERCULES_QUEST_12",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-1").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-1",`Labors of Hercules
1. The Nemean Lion`,[])}),WA.room.onLeaveLayer("hercules-quest-1").subscribe(P),WA.room.onEnterLayer("hercules-quest-2").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-2",`Labors of Hercules
2. The Lernaean Hydra`,[])}),WA.room.onLeaveLayer("hercules-quest-2").subscribe(P),WA.room.onEnterLayer("hercules-quest-3").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-3",`Labors of Hercules
3. The Hind of Ceryneia`,[])}),WA.room.onLeaveLayer("hercules-quest-3").subscribe(P),WA.room.onEnterLayer("hercules-quest-4").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-4",`Labors of Hercules
4. The Erymanthian Boar`,[])}),WA.room.onLeaveLayer("hercules-quest-4").subscribe(P),WA.room.onEnterLayer("hercules-quest-5").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-5",`Labors of Hercules
5. The Augean Stables`,[])}),WA.room.onLeaveLayer("hercules-quest-5").subscribe(P),WA.room.onEnterLayer("hercules-quest-6").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-6",`Labors of Hercules
6. The Stymphalian Birds`,[])}),WA.room.onLeaveLayer("hercules-quest-6").subscribe(P),WA.room.onEnterLayer("hercules-quest-7").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-7",`Labors of Hercules
7. The Cretan Bull`,[])}),WA.room.onLeaveLayer("hercules-quest-7").subscribe(P),WA.room.onEnterLayer("hercules-quest-8").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-8",`Labors of Hercules
8. The Horses of Diomedes`,[])}),WA.room.onLeaveLayer("hercules-quest-8").subscribe(P),WA.room.onEnterLayer("hercules-quest-9").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-9",`Labors of Hercules
9. The Belt of Hippolyte`,[])}),WA.room.onLeaveLayer("hercules-quest-9").subscribe(P),WA.room.onEnterLayer("hercules-quest-10").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-10",`Labors of Hercules
10. Geryon's Cattle`,[])}),WA.room.onLeaveLayer("hercules-quest-10").subscribe(P),WA.room.onEnterLayer("hercules-quest-11").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-11",`Labors of Hercules
11. The Apples of the Hesperides`,[])}),WA.room.onLeaveLayer("hercules-quest-11").subscribe(P),WA.room.onEnterLayer("hercules-quest-12").subscribe(()=>{A=WA.ui.openPopup("hercules-banner-12",`Labors of Hercules
12. Cerberus`,[])}),WA.room.onLeaveLayer("hercules-quest-12").subscribe(P)}).catch(t=>console.error(t));function P(){A!==void 0&&(A.close(),A=void 0)}async function Z(t){const e="https://apps.taskmagic.com/api/v1/webhooks/fAMWFBR7C00th7adAaD5g",{uuid:r,name:s}=WA.player;if(!r||!s){console.error("Invalid player data");return}const n=WA.room.id,o=Date.now()-(new Date().getTimezoneOffset()-new Date(new Date().toLocaleString("en-US",{timeZone:"America/Chicago"})).getTimezoneOffset())*6e4,i={id:r,name:s,roomId:n,firstPing:t,timestamp:o},a=(l,u,p=5e3)=>Promise.race([fetch(l,u),new Promise((b,h)=>setTimeout(()=>h(new Error("Request timed out")),p))]);try{const l=await a(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const u=await l.json();console.log("Success:",u)}catch(l){console.error("Error:",l)}}WA.onInit().then(()=>{if(WA.player.tags.includes("bot"))return;let t=!0;Z(t),t=!1,setInterval(()=>{Z(t)},3e5)});
//# sourceMappingURL=main-1395e6d5.js.map
